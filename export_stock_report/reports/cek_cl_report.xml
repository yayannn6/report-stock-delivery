<odoo>
    <template id="report_cek_cl">
        <t t-call="web.external_layout">
            <main class="page">

                <style>
                    table.report-table {
                        width: 100%;
                        border-collapse: collapse;
                        font-size: 12px;
                    }
                    table.report-table th,
                    table.report-table td {
                        border: 1px solid #000;
                        padding: 4px 6px;
                    }
                    table.report-table th {
                        background-color: #f2f2f2;
                        text-align: center;
                        font-weight: bold;
                    }
                    h4 {
                        margin-top: 15px;
                        margin-bottom: 5px;
                    }
                </style>

                <h3 style="text-align:center; margin-bottom:20px;">
                    Laporan Penerimaan Stok (Kategori: <t t-esc="kategori"/>)
                </h3>

                <t t-foreach="report_data" t-as="line">
                    <h4><t t-esc="line['product']"/></h4>

                    <table class="report-table">
                      <thead>
                          <tr>
                              <th rowspan="2">Warehouse</th>

                              <t t-foreach="line['uoms']" t-as="u">
                                  <th colspan="2" style="text-align:center;"><t t-esc="u.name"/></th>
                              </t>

                              <th rowspan="2">Total</th>
                          </tr>

                          <tr>
                              <t t-foreach="line['uoms']" t-as="u">
                                  <th>BOX</th>
                                  <th>KG</th>
                              </t>
                          </tr>
                      </thead>

                      <tbody>
                          <t t-foreach="line['warehouse_lines']" t-as="wh_line">
                              <tr>
                                  <td><t t-esc="wh_line['warehouse']"/></td>

                                  <t t-foreach="line['uoms']" t-as="u">
                                      <td><t t-esc="wh_line['uoms'].get(u, {}).get('box', 0)"/></td>
                                      <td><t t-esc="wh_line['uoms'].get(u, {}).get('kg', 0)"/></td>
                                  </t>

                                  <td><t t-esc="wh_line['total']"/></td>
                              </tr>
                          </t>
                      </tbody>

                      <tfoot>
                          <tr style="font-weight:bold;">
                              <td>Total</td>

                              <t t-foreach="line['uoms']" t-as="u">
                                  <td><t t-esc="line['total_by_uom'][u]['box']"/></td>
                                  <td><t t-esc="line['total_by_uom'][u]['kg']"/></td>
                              </t>

                              <td><t t-esc="line['total_kg']"/></td>
                          </tr>
                      </tfoot>
                  </table>


                    <br/>
                </t>

            </main>
        </t>
    </template>
</odoo>
